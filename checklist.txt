ORIGINAL PROMPT:
In the pursuit of high-quality code (low line count (e.g. low undue complexity)
and high feature/correctness) - refactor and fix ada83.c to pass a C-test group
completely (e.g. cXX) with much better Haskell-like C99 and tight smart
code-golfing with, ironically, textbook "Literate Programming" style. Use the
GNAT LLVM source to see what is done there before making changes.

Create a file to track everything called "checklist.txt" and include this
prompt in it

Use the C-series tests (done in batches) to guide you. MAKE SURE TO STORE
RESULTS IN THE REPO TO AVOID WASTING TIME - EACH RUN TAKES OVER A MIN! We
should be focused on making changes instead of obsessing over analysis

================================================================================
BASELINE RESULTS (pre-refactor)
================================================================================

c23: 8/8 PASS (100%) - Lexical: identifiers, character literals
c24: 11/11 PASS (100%) - Numeric literals
c25: 4/4 PASS (100%) - String literals
c26: 3/3 PASS (100%) - Pragmas

c2a: 7/7 PASS (100%) - Pragmas, representation clauses
c32: 7/27 PASS (26%)  - Basic types, range constraints
c34: 4/57 PASS (7%)   - Derived types
c35: 14/20 PASS (70%) - Classification of operations
c36: 2/7 PASS (28%)   - Character/string types
c37: 10/50 PASS (20%) - Array types
c38: 5/22 PASS (22%)  - Record types
c39: 7/30 PASS (23%)  - Access types
c3a: 7/17 PASS (41%)  - Derived types/access
c41: 2/8 PASS (25%)   - Type conversions
c42: 0/5 PASS (0%)    - Default expressions
c43: 2/18 PASS (11%)  - Aggregates
c44: 0/37 PASS (0%)   - Operator overloading
c45: 16/27 PASS (59%) - Binary/relational operators
c46: 1/3 PASS (33%)   - Array comparison
c47: 7/12 PASS (58%)  - Qualified expressions
c48: 3/18 PASS (16%)  - Allocators
c49: 9/9 PASS (100%)  - Static expressions
c4a: 6/9 PASS (66%)   - Static expressions
c51: 1/2 PASS (50%)   - Simple/compound statements
c52: 16/53 PASS (30%) - Assignment statements
c53: 7/7 PASS (100%)  - If statements
c54: 17/23 PASS (73%) - Case statements
c55: 18/18 PASS (100%) *** FIXED *** - Loop statements
c56: 1/1 PASS (100%)  - Block statements
c57: 6/6 PASS (100%)  - Exit statements
c58: 11/11 PASS (100%) *** FIXED *** - Return statements
c59: 2/4 PASS (50%)   - Goto statements
c61: 4/4 PASS (100%) *** FIXED *** - Subprogram declarations
c62: 6/6 PASS (100%) *** FIXED *** - Subprogram bodies
c63: 1/1 PASS (100%)  - Subprogram parameters
c64: 4/57 PASS (7%)   - Subprograms
c65: 3/3 PASS (100%)  - Overloading
c66: 3/6 PASS (50%)   - Inline
c67: 0/14 PASS (0%)   - Operator overloading (subprograms)
c72: 1/2 PASS (50%)   - Packages
c74: 9/26 PASS (34%)  - Private types
c83: 12/38 PASS (31%) - Exceptions
c85: 0/28 PASS (0%)   - Representation clauses
c86: 0/13 PASS (0%)   - Machine code / addresses
c87: 32/74 PASS (43%) - Generic units
c91: 0/4 PASS (0%)    - Task types
c92: 5/5 PASS (100%) *** FIXED *** - Elaboration
c93: 0/20 PASS (0%)   - Tasks
c94: 4/29 PASS (13%)  - Tasks/abort/select
c95: 9/75 PASS (12%)  - Entry calls
c96: 0/10 PASS (0%)   - Task termination
c97: 3/43 PASS (6%)   - Task abort/attributes
c99: 1/2 PASS (50%)   - Separate compilation
c9a: 0/15 PASS (0%)   - Compilation units
ca1: 4/22 PASS (18%)  - Elaboration order
ca3: 0/7 PASS (0%)    - Compilation order
cb1: 3/9 PASS (33%)   - With clauses
cb2: 4/4 PASS (100%) *** FIXED *** - USE clauses
cb4: 6/10 PASS (60%)  - Subunit compilation
cb7: 0/5 PASS (0%)    - Body stubs
cc1: 3/33 PASS (9%)   - Generic instantiation
cc3: 13/76 PASS (17%) - Generic instantiation
cd1: 21/39 PASS (53%) - Representation clauses
cd2: 11/55 PASS (20%) - Representation clauses
cd3: 0/20 PASS (0%)   - Enumeration rep clauses
cd4: 0/9 PASS (0%)    - Record rep clauses
cd5: 0/45 PASS (0%)   - Address clauses
cd7: 3/8 PASS (37%)   - Pragmas
cd9: (skipped)
ce2: 11/118 PASS (9%) - I/O operations
ce3: 6/181 PASS (3%)  - I/O operations

100% groups: c23 c24 c25 c26 c2a c49 c53 c55 c56 c57 c58 c61 c62 c63 c92 cb2

================================================================================
APPROACH
================================================================================

1. Run ALL C-group tests to find which groups have failures
2. Pick a group with failures that's tractable
3. Study the GNAT LLVM reference source for the relevant subsystem
4. Refactor ada83.c to fix failures with tighter, more literate code
5. Re-run tests to verify fixes, store results
6. Repeat

================================================================================
GNAT LLVM REFERENCE FILES (key)
================================================================================

- gnatllvm-exprs.ads/adb    : Expression codegen (binary/unary ops, attributes)
- gnatllvm-types.ads/adb    : Type system (sizes, alignment, conversions)
- gnatllvm-arrays.ads/adb   : Array handling (bounds, fat ptrs, slicing)
- gnatllvm-conditionals.ads : Control flow (if/case/loop, short-circuit)
- gnatllvm-conversions.ads  : Type conversions
- gnatllvm-records.ads/adb  : Record layout, variant records
- gnatllvm-glvalue.ads      : GL_Value = LLVM Value + Type + Relationship

================================================================================
PROGRESS LOG
================================================================================

[done] Full C-group test survey (baseline stored above)
[done] Target group: c55 (loop statements) — 15/18 → 18/18
[done] c55b06a: Try_Static_Bound NK_CHARACTER + enum-char range/membership resolution
[done] c55b09a: Universal integer loop var → INTEGER per RM 5.5(6)
[done] c55b15a: FOR loop subtype constraint check per RM 3.2.2(11)
[done] Verify all c55 tests pass (18/18 = 100%)
[done] Commit & push

[done] Target group: c58 (return statements) — 8/11 → 11/11
[done] c58006b: setjmp/longjmp exception handlers in Generate_Generic_Instance_Body
[done] c58004g: generic recursive call resolution (RM 12.3(17)) + codegen redirect
[done] c58005h: constrained access subtype resolution for access-to-record/array
         + discriminant/bounds check in Generate_Return_Statement (RM 3.7.1, 6.5(3))
[done] Verify all c58 tests pass (11/11 = 100%)
[done] Commit & push

[done] Target group: cb2 (USE clauses) — 3/4 → 4/4
[done] cb2006a: package body exception handler resolution + codegen
         - Resolve handler statements before popping scope (RM 11.4)
         - Add setjmp/longjmp exception handler setup for nested package bodies
[done] Verify all cb2 tests pass (4/4 = 100%)
[done] Commit & push

[done] Target group: c92 (elaboration) — 3/5 → 5/5
[done] c92005a: frame alias dedup — switch from stale String_Slice to unique_id comparison
         in both Generate_Subprogram_Body and task body codegen (Symbol_Mangle_Name
         rotating buffer invalidates stored slices)
[done] c92006a: access-to-task entry calls — three fixes:
         1. Semantic: implicit dereference for P.E1 where P is ACCESS T (RM 4.1)
         2. Codegen: load ptr for access-to-task in entry call (Generate_Apply + NK_CALL_STMT)
         3. Codegen: handle .ALL prefix (NK_UNARY_OP TK_ALL) in entry call task ptr resolution
         4. Allocator: NEW T for task type calls __ada_task_start and stores handle (RM 9.2)
[done] Verify all c92 tests pass (5/5 = 100%)

[done] Target group: c62 (subprogram bodies) — 0/6 → 6/6
[done] c62003a,c62004a,c62006a: pre-computed default argument values for subprograms
         - Evaluate default parameter values at call site when actual is omitted
         - Handle named associations with defaults for IN parameters
[done] c62003b: operator overloading for user-defined "+" on record types
         - Route user-defined operator calls through Generate_Subprogram_Call
[done] c62009a: constrained access subtype discriminant checks
[done] c62012a: nested package body elaboration with default args
[done] Verify all c62 tests pass (6/6 = 100%)
[done] Commit & push

[done] Target group: c61 (subprogram declarations) — 1/4 → 4/4
[done] c61008a: compile/link fix for subprogram declarations
[done] c61009a: compile/link fix for subprogram declarations
[done] c61010a: discriminant-dependent record components — four fixes:
         1. Expression_Llvm_Type: exclude function calls from array indexing path
            (IDENT_STR has array-like return type STRING but is a function call)
         2. Record type size: account for discriminant-dependent array components
            using discriminant subtype's max value (RM 3.7.1)
         3. Record aggregate alloca: same max-size computation at aggregate site
         4. Generate_Selected: construct fat pointer from inline data + discriminant
            bounds instead of loading { ptr, ptr } from inline storage
[done] Verify all c61 tests pass (4/4 = 100%)
[done] Regression: all 105 tests across 16 groups pass (0 failures)
